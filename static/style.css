/* =========================
   Dark-Blue Theme (Navy)
   ========================= */
:root{
  --bg:           #0b1220;                /* page background */
  --panel:        #0e1626;
  --card:         #0f1b2d;                /* cards/inputs */
  --card-2:       #112033;
  --text:         #e6edf3;                /* primary text */
  --muted:        #a0afc1;                /* secondary text */
  --line:         rgba(255,255,255,.08);  /* borders */
  --accent:       #4ea1ff;                /* electric blue */
  --accent-weak:  rgba(78,161,255,.18);   /* focus/hover glow */
  --radius:       12px;
}

/* Base */
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
  line-height: 1.45;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
h1,h2,h3{margin:.15rem 0}
h1{font-size:1.6rem} h2{font-size:1.25rem} h3{font-size:1.05rem}

a.link{ color: var(--accent); text-decoration: none; }
a.link:hover{ text-decoration: underline; }

.section{ margin:16px 0 }
.subsection{ margin-top:12px }
.row{ display:flex; align-items:center; gap:10px }
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
@media (max-width: 800px){ .grid-2{ grid-template-columns:1fr } }

/* Cards & grids */
.card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: 0 1px 2px rgba(0,0,0,.5);
}
.card-pad{ padding:16px }

.cards{ list-style:none; padding:0; margin:0; display:grid; gap:12px }
.cards.grid{ grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)) }
.subgrid{ grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)) }
.subcard .card-pad{ padding:12px }

/* Badges / pills / chips */
.badges{ display:flex; flex-wrap:wrap; gap:6px }
.pill{
  display:inline-flex; align-items:center; gap:6px;
  padding:2px 8px; font-size:12px; border-radius:999px;
  border:1px solid var(--line);
  color: var(--accent);
  background: var(--card-2);
}
.chip{
  display:inline-flex; align-items:center; gap:6px;
  padding:2px 8px; font-size:12px; border-radius:999px;
  border:1px solid var(--line);
  color: var(--muted);
  background: rgba(78,161,255,.08);
}
.chip.accent{
  border-color: rgba(78,161,255,.45);
  color: var(--accent);
  background: var(--accent-weak);
}
/* legacy circular counter (kept for compatibility) */
.count{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:22px; height:22px; padding:0 6px; font-size:12px;
  border-radius:999px; border:1px solid var(--line);
  color: var(--muted); background: rgba(255,255,255,.04);
}

/* Typographic helpers */
.kicker{
  text-transform:uppercase; letter-spacing:.4px;
  font-size:12px; color: var(--muted);
}
.muted{ color: var(--muted) }
.empty{
  color: var(--muted); padding:12px;
  border:1px dashed var(--line); border-radius:10px;
  background: rgba(255,255,255,.03);
}
.list{ list-style:none; margin:0; padding:0 }
.list li{
  display:flex; gap:10px; align-items:center;
  padding:6px 0; border-bottom:1px solid var(--line)
}
.list li:last-child{ border-bottom:none }

/* Inputs & forms */
label{ display:block; font-size:.92rem; color: var(--muted) }
input, select, textarea{
  width:100%; padding:10px 12px; border-radius:10px;
  border:1px solid var(--line); background: var(--card-2);
  color: var(--text); outline:none;
}
input::placeholder, textarea::placeholder{ color: #8191a6 }
input:focus, select:focus, textarea:focus{
  border-color: rgba(78,161,255,.6);
  box-shadow: 0 0 0 3px var(--accent-weak);
}

/* Buttons */
button{
  appearance:none; border:1px solid var(--line); background: var(--card-2);
  color: var(--text); padding:8px 12px; border-radius:10px; cursor:pointer;
}
button:hover{ filter: brightness(1.05) }
button.primary{
  border-color: rgba(78,161,255,.45);
  background: var(--accent);
  color: #0b1220;
}
button.ghost{
  background: transparent;
  border:1px solid var(--line);
  color: var(--text);
}
button.tiny{ padding:6px 10px; border-radius:8px }

/* Icon [+] buttons */
.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:8px;
  border:1px solid var(--line); background: var(--card-2); color: var(--text);
}
.icon-btn.plus{
  background: var(--accent); color:#0b1220;
  border-color: rgba(78,161,255,.45);
}
.icon-btn.plus:hover{ filter: brightness(1.05) }

/* Toolbars */
.toolbar-mini input{ border-radius:8px; padding:8px 10px }

/* Modals */
.modal{
  display:none; position:fixed; z-index:100; left:0; top:0; width:100%; height:100%;
  background: rgba(2,8,20,.7); align-items:center; justify-content:center
}
.modal-content{ max-width:500px; width:90% }
.modal-small .modal-content{ max-width:420px; width:92% }

/* Footer hint (centered) */
.site-footer, footer.section.muted{ text-align:center; margin-top:24px; color:var(--muted) }
.site-footer .footer-note, footer.section.muted .kicker{
  display:inline-block; margin-top:6px; font-size:12px; letter-spacing:.4px; text-transform:uppercase; opacity:.9;
}

/* QR image spacing (page-level) */
.qr-wrap .qr-img{ margin-bottom:16px }

/* Optional: tile helpers */
.tile-title{ margin:.2rem 0 0 0 }
.tile-type{ font-weight:600 }
.chip.code{ font-weight:700; letter-spacing:.2px }

/* Scrollbar (nice on dark) */
::-webkit-scrollbar{ width:12px; height:12px }
::-webkit-scrollbar-track{ background: #0c1526 }
::-webkit-scrollbar-thumb{ background: #1a2a44; border-radius:8px; border:2px solid #0c1526 }
::-webkit-scrollbar-thumb:hover{ background: #223a61 }


/* --- Center the UI without touching HTML --- */

/* Center the header row and the main+footer container */
header .header-inner,
.container{
  max-width: 1100px;   /* tweak: 960 / 1200 if you prefer */
  margin: 0 auto;      /* centers horizontally */
  padding: 0 16px;     /* nice side breathing room */
}

/* Keep header bits aligned nicely */
.header-inner .brand{ display:flex; align-items:center; gap:8px }
.header-inner .logo{ font-size:20px; line-height:1 }

/* Center the footer note */
footer.section.muted{ text-align:center }
footer.section.muted .kicker{
  display:inline-block; margin-top:6px; letter-spacing:.4px; text-transform:uppercase;
}

/* Make the grids look centered within the page width */
.cards{ justify-content: center; }
.cards.grid, .subgrid{
  justify-content: center;   /* center tracks when there’s extra space */
  justify-items: stretch;    /* cards fill their track */
  align-items: stretch;
}

/* =========================
   Stylish Dark-Blue Polish
   (no HTML changes needed)
   ========================= */

/* Tokens for glow & gradients */
:root{
  --accent-grad: linear-gradient(135deg, #6bb8ff 0%, #4ea1ff 45%, #3b7cff 100%);
  --ring: rgba(78,161,255,.55);
  --card-glow: 0 12px 28px rgba(8,14,26,.45);
  --edge-glow: 0 0 0 1px rgba(78,161,255,.25) inset;
}

/* Center layout */
header .header-inner,
.container{
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 16px;
}

/* Header: glassy, sticky, subtle glow */
header{
  position: sticky; top: 0; z-index: 50;
  background: linear-gradient(to bottom, rgba(11,18,32,.8), rgba(11,18,32,.55));
  backdrop-filter: saturate(150%) blur(10px);
  border-bottom: 1px solid var(--line);
  box-shadow: 0 6px 16px rgba(0,0,0,.35);
}
.header-inner .brand{ display:flex; align-items:center; gap:10px }
.header-inner .logo{
  width: 30px; height: 30px; display:grid; place-items:center;
  border-radius: 8px;
  background: var(--accent-grad);
  color: #0b1220; font-weight: 700; box-shadow: var(--edge-glow);
}

/* Cards: soft glass, lift on hover */
.card{
  background:
    radial-gradient(120% 140% at 0% 0%, rgba(78,161,255,.05), transparent 40%),
    var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card:hover{ transform: translateY(-3px); box-shadow: var(--card-glow); border-color: rgba(78,161,255,.35) }
.subcard .card-pad{ padding: 14px }

/* Grids feel centered and balanced */
.cards{ justify-content: center }
.cards.grid, .subgrid{
  justify-content: center;
  justify-items: stretch;
  align-items: stretch;
  gap: 14px;
}

/* Headings: slightly brighter with accent underline */
h2, .kicker{
  position: relative;
}
h2::after{
  content:""; position:absolute; left:0; bottom:-6px; height:2px; width:36px;
  background: var(--accent-grad); border-radius:2px; opacity:.6;
}

/* Pills & chips: modern glass */
.pill{
  background: linear-gradient(180deg, var(--card-2), rgba(255,255,255,.02));
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: var(--edge-glow);
}
.chip{
  background: linear-gradient(180deg, rgba(78,161,255,.10), rgba(78,161,255,.06));
  border: 1px solid rgba(78,161,255,.22);
  color: var(--text);
}
.chip.accent{
  background: var(--accent-grad);
  border-color: transparent;
  color: #0b1220; font-weight: 600;
}

/* Buttons */
button{
  border-radius: 10px;
  transition: transform .12s ease, box-shadow .15s ease, filter .15s ease, background .15s ease, border-color .15s ease;
}
button:active{ transform: translateY(1px) }

button.primary{
  background: var(--accent-grad);
  color: #0b1220;
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 6px 14px rgba(78,161,255,.25);
}
button.primary:hover{ filter: brightness(1.05) }

button.ghost{
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border-color: rgba(255,255,255,.14);
}

.icon-btn{
  border-radius: 10px;
  border-color: rgba(255,255,255,.16);
  background: var(--card-2);
}
.icon-btn.plus{
  background: var(--accent-grad);
  color: #0b1220;
  border-color: transparent;
  box-shadow: 0 6px 14px rgba(78,161,255,.25);
}
.icon-btn.plus:hover{ filter: brightness(1.06) }

/* Inputs: crisp focus ring, subtle depth */
input, select, textarea{
  background: linear-gradient(180deg, var(--card-2), rgba(255,255,255,.01));
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 1px 0 rgba(255,255,255,.03) inset;
}
input:focus, select:focus, textarea:focus{
  border-color: var(--ring);
  box-shadow: 0 0 0 3px var(--accent-weak), 0 1px 0 rgba(255,255,255,.05) inset;
}

/* Lists & empty states */
.list li{ border-bottom: 1px solid rgba(255,255,255,.08) }
.empty{
  border: 1px dashed rgba(255,255,255,.18);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
}

/* Modals: deeper blur + glow on the card */
.modal{ background: rgba(6,12,22,.75); backdrop-filter: blur(8px) }
.modal .card{ box-shadow: 0 18px 40px rgba(0,0,0,.6) }

/* Footer: center and soften */
footer.section.muted{ text-align:center }
footer.section.muted .kicker{
  display:inline-block; margin-top:8px; letter-spacing:.45px; text-transform:uppercase; opacity:.9;
}

/* Nice selection & focus */
::selection{ background: rgba(78,161,255,.35) }
:focus-visible{ outline: 2px solid var(--ring); outline-offset: 2px }

/* Subtle hover for links */
a.link{ position:relative }
a.link::after{
  content:""; position:absolute; left:0; bottom:-2px; width:0; height:2px;
  background: var(--accent-grad); transition: width .2s ease;
}
a.link:hover::after{ width:100% }

/* Keep the QR area tidy */
.qr-wrap .qr-img{ margin-bottom:18px }

/* ===== Pleasing gradient header (CSS-only) ===== */

/* tokens */
:root{
  --header-grad:
    radial-gradient(120% 180% at 0% 0%, rgba(78,161,255,.16), transparent 38%),
    radial-gradient(120% 180% at 100% 0%, rgba(59,124,255,.12), transparent 46%),
    linear-gradient(135deg, #0b1220 0%, #0f1c34 45%, #10223f 100%);
}

/* full-width header with gradient + glassy vibe */
header{
  position: sticky; top: 0; z-index: 60;
  background: var(--header-grad);
  backdrop-filter: saturate(160%) blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 8px 26px rgba(0,0,0,.40);
}
header::after{ /* soft bottom edge highlight */
  content:""; position:absolute; left:0; right:0; bottom:-1px; height:1px;
  background: linear-gradient(90deg, transparent, rgba(78,161,255,.35), transparent);
  pointer-events:none;
}

/* keep your existing structure, just enhance it */
.header-inner{
  display:flex; align-items:center; gap:12px;
  min-height: 66px;
  max-width: 1100px; margin: 0 auto; padding: 6px 16px;
}

/* brand cluster */
.header-inner .brand{
  display:flex; align-items:center; gap:12px;
  font-weight: 600; letter-spacing:.2px;
}

/* emoji logo tile */
.header-inner .logo{
  width: 36px; height: 36px; border-radius: 10px;
  display:grid; place-items:center;
  background: linear-gradient(135deg, #6bb8ff 0%, #4ea1ff 45%, #3b7cff 100%);
  color: #0b1220; font-weight: 800;
  box-shadow:
    0 8px 18px rgba(78,161,255,.35),
    0 0 0 1px rgba(78,161,255,.35) inset;
  transition: transform .18s ease, filter .18s ease;
}
.header-inner .logo:hover{ transform: translateY(-1px); filter: brightness(1.05); }

/* brand text (the “Home QR Inventory (Typed)”) */
.header-inner .brand > div:not(.logo){
  font-size: 1.02rem;
  color: var(--text);
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* right-side “private & local” */
header .muted{
  color: #a8b8cc;
  opacity: .95;
}

/* optional subtle animation of the header gradient */
@media (prefers-reduced-motion: no-preference){
  header{
    background-size: 140% 140%;
    animation: headerShift 18s ease-in-out infinite;
  }
  @keyframes headerShift{
    0%,100%{ background-position: 0% 0% }
    50%{ background-position: 100% 0% }
  }
}

/* === Remove all link underlines (including the animated one) === */
a.link{ text-decoration: none !important; }
a.link:hover, a.link:focus{ text-decoration: none !important; }
a.link::after{ display: none !important; }  /* kills the fancy hover underline */

/* === Nicer spacing in modals === */
/* Give vertical rhythm to stacked fields */
form.stack > * + *{ margin-top: 10px; }

/* Extra space before the button row in modals */
.modal form .row:last-child{ margin-top: 14px; }

/* A bit more breathing room inside popup cards */
.modal .card .card-pad{ padding: 18px 18px 22px; }

/* Slightly larger buttons in popups */
.modal .card button{ padding: 10px 14px; }

/* If any button still feels tight on small screens */
@media (max-width: 480px){
  .modal .card button{ padding: 12px 16px; }
}
/* --- remove ALL underlines, including decorative ones --- */
a, a:link, a:visited, a:hover, a:active{
  text-decoration: none !important;
  border-bottom: none !important;
}

/* if any headings inject decorative underlines, kill them */
h1::after, h2::after, h3::after{ content: none !important; }

/* extra safety: links inside cards/grids */
.cards a, .subgrid a{ text-decoration: none !important; border: 0 !important; }


/* Breadcrumb above Shelf/Drawer title */
.breadcrumb{
  margin-top: .25rem;
  font-size: 12px;
  letter-spacing: .2px;
}
.breadcrumb .sep{
  margin: 0 .35rem;
  color: var(--muted);
}

/* inline pill + breadcrumb */
.breadcrumb-inline{
  display:flex; align-items:center; flex-wrap:wrap; gap:8px;
}
.breadcrumb-inline .sep{ color: var(--muted); }
.breadcrumb-inline .crumb{
  color: var(--accent);
  white-space: nowrap;     /* keeps it tidy; remove if you prefer wrapping */
}


/* inline breadcrumb + parent note */
.breadcrumb-inline{ display:flex; align-items:center; flex-wrap:wrap; gap:8px; }
.breadcrumb-inline .sep{ color: var(--muted); }
.breadcrumb-inline .note{
  color: var(--muted); font-size: 12px;
  max-width: 52ch; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* small notes on shelf/drawer tiles */
.small-note{
  margin-top: .25rem;
  font-size: 12px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


button.danger{
  background:#ef4444; color:#fff;
  border:1px solid #b91c1c;
}
button.danger:hover{ filter:brightness(1.05) }

/* keep the delete button from wrapping under the title */
.no-shrink{ flex-shrink: 0; }

/* smaller, tidy danger button for titlebar */
button.danger.tiny{ padding:6px 10px; border-radius:8px }

/* (ensure danger style exists) */
button.danger{
  background:#ef4444; color:#fff; border:1px solid #b91c1c;
}
button.danger:hover{ filter:brightness(1.05) }


/* Keep the icon from wrapping under title */
.no-shrink{ flex-shrink: 0; }

/* Icon danger style (trash) */
.icon-btn.danger{
  background:#ef4444;
  color:#fff;
  border-color:#b91c1c;
}
.icon-btn.danger:hover{ filter:brightness(1.05) }

/* Ensure "No items" inside container cards uses the big empty style */
#contGrid .card .empty{
  color: var(--muted);
  padding: 12px;
  border: 1px dashed var(--line);
  border-radius: 10px;
  background: rgba(255,255,255,.03);
  font-size: 0.95rem;
  margin-top: .35rem;
}

.breadcrumb-inline{ display:flex; align-items:center; flex-wrap:wrap; gap:8px; }
.breadcrumb-inline .sep{ color: var(--muted); }
.breadcrumb-inline .crumb{ color: var(--accent); white-space: nowrap; }
.breadcrumb-inline .note{
  color: var(--muted); font-size: 12px;
  max-width: 52ch; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}


/* ===== Spacing polish for forms, add-item row, and popups ===== */

/* 1) Labels: put space between label text and its input/select/textarea */
.card form label{
  display: grid;
  gap: 10px;                 /* space between label text and control */
}
.card form label > input,
.card form label > select,
.card form label > textarea{
  margin-top: 0;             /* gap handled by the grid above */
}

/* 2) Stacked forms (used in modals): more vertical rhythm between fields */
form.stack > * + *{ margin-top: 14px; }   /* was 10px */

/* 3) Button row inside modals: add extra top space */
.modal form .row:last-child{ margin-top: 18px; }

/* 4) Add-item section on container page:
      more space between “Add item” and the first input row */
.card .kicker + form.row,
.section .kicker + form.row{
  margin-top: 14px;
}

/* 5) Inputs feel a bit cramped? Slightly increase internal padding */
input[type="text"],
input[type="number"],
input[type="search"],
textarea,
select{
  padding: 10px 12px;
}

/* 6) Extra breathing room inside popup cards */
.modal .card .card-pad{ padding: 20px 20px 24px; }


/* === Themed dropdowns (select) to match site === */
select{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;

  background: var(--panel, #0f1c34);
  color: var(--text, #e6eefc);
  border: 1px solid var(--line, rgba(255,255,255,.12));
  border-radius: 10px;

  padding: 10px 40px 10px 12px;  /* room for arrow */
  width: 100%;

  /* chevron arrow (inline SVG) */
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'>\
<path d='M6 8l4 4 4-4' fill='none' stroke='%234ea1ff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 14px;
  transition: border-color .15s ease, box-shadow .15s ease, filter .15s ease;
}

select:hover{ filter: brightness(1.05); }
select:focus{
  outline: 0;
  border-color: rgba(78,161,255,.55);
  box-shadow: 0 0 0 3px rgba(78,161,255,.25);
}

select:disabled{
  opacity: .6;
  cursor: not-allowed;
}

/* Dropdown panel colors (supported on most browsers) */
select option{
  background: var(--panel, #0f1c34);
  color: var(--text, #e6eefc);
}

/* Tighten label→field spacing in modals & forms (so labels don't touch inputs) */
.card form label,
.modal form label{
  display: grid;
  gap: 12px; /* space between label text and the control */
}

/* === Stylish Back button (works on every page) === */
/* Targets the first link at the top of <main> (your Back link) */
.container main > a.link:first-child,
main > a.link:first-child,
.container main > a.link:first-of-type,
main > a.link:first-of-type{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  margin: 6px 0 14px;
  border: 1px solid var(--line, rgba(255,255,255,.14));
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
  color: var(--accent, #4ea1ff);
  text-decoration: none !important;
  box-shadow: 0 1px 0 rgba(0,0,0,.25) inset;
  transition: transform .12s ease, box-shadow .15s ease, border-color .15s ease, filter .15s ease;
}

/* Hover/active/focus states */
.container main > a.link:first-child:hover,
main > a.link:first-child:hover,
.container main > a.link:first-of-type:hover,
main > a.link:first-of-type:hover{
  transform: translateY(-1px);
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 0 0 3px rgba(78,161,255,.22);
  filter: brightness(1.05);
}

.container main > a.link:first-child:active,
main > a.link:first-child:active,
.container main > a.link:first-of-type:active,
main > a.link:first-of-type:active{
  transform: translateY(0);
  box-shadow: 0 0 0 2px rgba(78,161,255,.18);
}

/* Make sure the arrow + text never gets underlined anywhere */
.container main > a.link:first-child *,
main > a.link:first-child *{ text-decoration: none !important; }

/* Small screens: a bit more touch padding */
@media (max-width: 480px){
  .container main > a.link:first-child,
  main > a.link:first-child,
  .container main > a.link:first-of-type,
  main > a.link:first-of-type{
    padding: 10px 14px;
    border-radius: 12px;
  }
}
/* 3-column header row so title stays centered */
.titlebar-grid{
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
  margin-top: .3rem;
}
.titlebar-grid h2{
  margin: 0;
  justify-self: center;   /* stays centered even if left/right widths differ */
}

/* Back pill used inside the titlebar */
.back-pill{
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 10px;
  border: 1px solid var(--line, rgba(255,255,255,.14));
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
  color: var(--accent, #4ea1ff);
  text-decoration: none !important;
  box-shadow: 0 1px 0 rgba(0,0,0,.25) inset;
  transition: transform .12s ease, box-shadow .15s ease, border-color .15s ease, filter .15s ease;
}
.back-pill:hover{
  transform: translateY(-1px);
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 0 0 3px rgba(78,161,255,.22);
  filter: brightness(1.05);
}

/* Row that places the Back pill OUTSIDE the header card, on the left */
.header-row-outside{
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 12px;
  align-items: start;
}

/* Pretty Back pill (reusable) */
.back-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px;
  border:1px solid var(--line, rgba(255,255,255,.14));
  border-radius:10px;
  background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
  color: var(--accent, #4ea1ff);
  text-decoration:none !important;
  box-shadow: 0 1px 0 rgba(0,0,0,.25) inset;
  transition: transform .12s ease, box-shadow .15s, border-color .15s, filter .15s;
}
.back-pill:hover{
  transform: translateY(-1px);
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 0 0 3px rgba(78,161,255,.22);
  filter: brightness(1.05);
}

/* Mobile: stack Back above the card nicely */
@media (max-width: 600px){
  .header-row-outside{
    grid-template-columns: 1fr;
    gap: 8px;
  }
  .back-pill{ justify-self: start; }
}
/* Back rail outside the header card */
.header-row-outside{
  display: grid;
  grid-template-columns: 48px 1fr;   /* 48px rail + card */
  gap: 12px;
  align-items: stretch;              /* make rail match card height */
}

/* Icon-only rail */
.back-rail{
  align-self: stretch;               /* full height of the row */
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  border: 1px solid var(--line, rgba(255,255,255,.14));
  border-radius: 12px;
  background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
  color: var(--accent, #4ea1ff);
  text-decoration: none !important;
  box-shadow: 0 1px 0 rgba(0,0,0,.25) inset;
  transition: transform .12s ease, box-shadow .15s ease, border-color .15s ease, filter .15s ease;
}
.back-rail:hover{
  transform: translateY(-1px);
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 0 0 3px rgba(78,161,255,.22);
  filter: brightness(1.05);
}
.back-rail svg{
  width: 22px; height: 22px;
  display: block;
}

/* Mobile stacks nicely */
@media (max-width: 600px){
  .header-row-outside{ grid-template-columns: 1fr; gap: 8px; }
  .back-rail{ width: 44px; height: 44px; align-self: start; }
}
/* Bigger Items header + a little bottom padding */
.section > h2.kicker{
  font-size: 1.18rem;   /* slightly larger */
  font-weight: 700;
  letter-spacing: .02em;
  margin: 4px 0 12px;   /* extra space below the title */
}

/* Keep small kickers (toolbars/modals) unchanged */
.toolbar-mini .kicker,
.modal .kicker{
  font-size: .9rem;
  margin: 0;
  font-weight: 600;
}

/* Bigger "Containers here" + a bit of space below the row */
.row.toolbar-mini .kicker{
  font-size: 1.18rem;
  font-weight: 700;
  letter-spacing: .02em;
}

/* Nudge the + down a touch and add bottom spacing under the whole bar */
.row.toolbar-mini{ margin-bottom: 12px; }
.row.toolbar-mini .icon-btn.plus{ transform: translateY(1px); }

/* Blur + dim overlay for modals (applies to existing modals too) */
.modal{
  background: rgba(9,17,35,.45);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* Make the Items toolbar consistent and roomy */
.row.toolbar-mini .kicker{
  font-size: 1.18rem;
  font-weight: 700;
  letter-spacing: .02em;
}
.row.toolbar-mini{ margin-bottom: 12px; }
.row.toolbar-mini .icon-btn.plus{ transform: translateY(1px); }

/* Ensure the first sections in both columns align at the very top */
.grid-2 .col > .section:first-child{ margin-top: 0; }

/* Extra breathing room at the bottom of ALL modals */
.modal .card .card-pad{
  padding-bottom: 20px;   /* was default; now a bit roomier */
}

/* Also give the modal's button row some top space */
.modal .card .card-pad .row:last-child{
  margin-top: 12px;
}

/* (Optional) Only for the Add Item modal */
#addItemModal .card .card-pad{
  padding-bottom: 22px;
}
/* Add space under the Add item title */
#addItemModal .card .card-pad .kicker{
  margin-bottom: 12px;
}

/* Labels stack nicely and inputs sit a bit lower than the label text */
#addItemModal .stack label{
  display: block;
}
#addItemModal .stack label > input{
  margin-top: 8px;        /* space between "Name" and its input */
  padding: 10px 12px;     /* comfy input padding */
}

/* Space between fields */
#addItemModal .stack label + label{
  margin-top: 12px;
}

/* Extra breathing room at the bottom + above buttons */
#addItemModal .card .card-pad{
  padding-bottom: 22px;
}
#addItemModal .card .card-pad .row:last-child{
  margin-top: 12px;
}
/* Keep the Back rail inline with the header on mobile too */
@media (max-width: 600px){
  .header-row-outside{
    grid-template-columns: 44px 1fr;  /* don't stack; keep rail + card in one row */
    gap: 8px;
    align-items: stretch;              /* rail matches header card height */
  }
  .back-rail{
    width: 44px;
    align-self: stretch;               /* same height as the header card */
  }
  .back-rail svg{
    width: 20px; height: 20px;
  }
}
/* MOBILE: keep Back rail inline AND same height as header card */
@media (max-width: 600px){
  .header-row-outside{
    display: grid;
    grid-template-columns: 44px 1fr;  /* rail + card, side-by-side */
    gap: 8px;
    align-items: stretch;              /* children fill row height */
  }

  /* override any earlier 44px fixed height */
  .back-rail{
    width: 44px;
    height: auto !important;           /* remove fixed 44px */
    align-self: stretch !important;    /* match card height */
    display: flex;
    align-items: center;
    justify-content: center;
    padding-block: 8px;                /* a bit of vertical breathing room */
  }

  .back-rail svg{
    width: 20px; height: 20px;
  }
}


/* Move icon styling (blue, like your theme) */
.icon-btn.move{
  border: 1px solid var(--line, rgba(255,255,255,.14));
  border-radius: 8px;
  padding: 6px 10px;
  background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
  color: var(--accent, #4ea1ff);
  cursor: pointer;
}
.icon-btn.move:hover{
  border-color: rgba(78,161,255,.5);
  box-shadow: 0 0 0 3px rgba(78,161,255,.22);
}

/* Modal blur already set earlier; ensure form spacing feels good */
.modal .card .card-pad{
  padding-bottom: 22px;
}
.modal .card .card-pad .kicker{ margin-bottom: 12px; }
.modal .stack label{ display:block; }
.modal .stack label > input,
.modal .stack label > select{
  margin-top: 8px;
  padding: 10px 12px;
}
.modal .stack label + label{ margin-top: 12px; }
.modal .card .card-pad .row:last-child{ margin-top: 12px; }

/* Keep long breadcrumb options tidy */
.modal select{ width:100%; max-width:100%; }
.modal select option{
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

/* Nicer wrapping for field chips inside cards */
.cards .badges { flex-wrap: wrap; gap: 6px; }

/* Stacked form field: label on top, control below (matches other inputs) */
.stack-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Slightly larger checkbox so it aligns visually with inputs */
.stack-field .chk {
  width: 1.15rem;
  height: 1.15rem;
}

/* Keep labels consistent on narrow screens */
@media (max-width: 640px) {
  .field-row label { min-width: 150px; }
}

/* Inline field grid for perfect alignment */
.field-row {
  display: flex;
  gap: 10px;
  align-items: end;
}

.field-grid {
  display: grid;
  gap: 10px 12px;
  align-items: end;
  /* Order | Label | Kind | Options | Required | Save */
  grid-template-columns: 110px minmax(220px, 1.3fr) 160px minmax(260px, 2fr) 120px auto;
  flex: 1;
}

.field-grid label {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.field-grid input[type="text"],
.field-grid input[type="number"],
.field-grid select {
  width: 100%;
}

.field-grid .order   { grid-column: 1; }
.field-grid .label   { grid-column: 2; }
.field-grid .kind    { grid-column: 3; }
.field-grid .options { grid-column: 4; }
.field-grid .required{ grid-column: 5; }
.field-grid .actions { grid-column: 6; justify-self: end; }

/* Hide options by default; JS will reveal for Kind=select */
.opt-wrap { display: none; }

/* Responsive: stack to 2 rows on smaller widths */
@media (max-width: 980px) {
  .field-grid {
    grid-template-columns: 1fr 1fr;
  }
  .field-grid .order    { grid-column: 1; }
  .field-grid .label    { grid-column: 2; }
  .field-grid .kind     { grid-column: 1; }
  .field-grid .options  { grid-column: 2; }
  .field-grid .required { grid-column: 1; }
  .field-grid .actions  { grid-column: 2; justify-self: end; }
}

/* --- Align field titles in one line --- */
.field-row { align-items: start; }      /* was end */
.field-grid { align-items: start; }     /* was end */

/* Consistent label styling (top text) */
.field-grid label > span {
  display: block;
  margin-bottom: 6px;     /* same gap as other inputs */
  font-size: .92rem;      /* same visual size as others */
}

/* Make inputs have consistent control height */
.field-grid input[type="text"],
.field-grid input[type="number"],
.field-grid select {
  height: 38px;           /* your input height */
}

/* Checkbox: nudge to align visually with the input row */
.field-grid .required input[type="checkbox"] {
  margin-top: 6px;        /* places it right below the title like inputs */
  width: 1.15rem;
  height: 1.15rem;
}


/* Field row grid: [handle+badge] | [form] | [delete] */
.field-row {
  display: grid;
  grid-template-columns: 140px 1fr auto;
  gap: 10px;
  align-items: end;
}

.order-cell {
  display: flex;
  align-items: center;
  gap: 10px;
}

.drag-handle {
  cursor: grab;
}

.field-card.dragging {
  opacity: .6;
}

/* Round order badge */
.order-badge {
  display: inline-grid;
  place-items: center;
  min-width: 34px;
  height: 34px;
  padding: 0 8px;
  border-radius: 999px;
  background: rgba(37, 99, 235, .1);
  color: #2563eb;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

/* Middle form uses grid; align labels & controls */
.field-grid {
  display: grid;
  gap: 10px 12px;
  align-items: start;
  grid-template-columns: minmax(220px, 1.3fr) 160px minmax(260px, 2fr) 120px auto;
}

.field-grid label { display:flex; flex-direction:column; gap:6px; }
.field-grid label > span { margin-bottom: 0; }

.field-grid input[type="text"],
.field-grid input[type="number"],
.field-grid select { width:100%; height:38px; }

/* Show/hide options via JS */
.opt-wrap { display: none; }

/* Delete cell */
.delete-cell { align-self: end; }

/* Icon buttons (save/delete/handle) symmetric */
.icon-btn {
  display: inline-grid;
  place-items: center;
  width: 38px;
  height: 38px;
  padding: 0;
  line-height: 1;
  border-radius: 8px;
}

/* Responsive: collapse to two columns */
@media (max-width: 980px) {
  .field-row { grid-template-columns: 120px 1fr; }
  .delete-cell { justify-self: end; }
}
/* Field row grid: compact left column, no big spacer */
.field-row {
  display: grid;
  grid-template-columns: 56px 1fr auto; /* slim left column */
  gap: 8px;                              /* tighter gap to fields */
  align-items: start;
}

.order-cell {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;             /* small gap between badge and handle */
}

/* Round order badge (compact) */
.order-badge {
  display: inline-grid;
  place-items: center;
  min-width: 30px;
  height: 30px;
  padding: 0 6px;
  border-radius: 999px;
  background: rgba(37, 99, 235, .1);
  color: #2563eb;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  font-size: .95rem;
}

/* Smaller handle; sits right under the badge */
.drag-handle {
  width: 30px;
  height: 30px;
  cursor: grab;
}

/* Middle form keeps a neat grid */
.field-grid {
  display: grid;
  gap: 10px 12px;
  align-items: start;
  grid-template-columns: minmax(220px, 1.3fr) 160px minmax(260px, 2fr) 120px auto;
}

.field-grid label { display:flex; flex-direction:column; gap:6px; }
.field-grid label > span { margin-bottom: 0; }

.field-grid input[type="text"],
.field-grid input[type="number"],
.field-grid select { width:100%; height:38px; }

.opt-wrap { display:none; } /* JS reveals for kind=select */

.delete-cell { align-self: end; }

.icon-btn {
  display: inline-grid;
  place-items: center;
  width: 38px;
  height: 38px;
  padding: 0;
  line-height: 1;
  border-radius: 8px;
}

/* Responsive */
@media (max-width: 980px) {
  .field-row { grid-template-columns: 48px 1fr; }
  .delete-cell { justify-self: end; }
}

/* ---------- Type detail page: mobile layout for field rows ---------- */
@media (max-width: 700px){

  /* Each field card becomes a neat single-column panel */
  .field-card .card-pad{
    position: relative;
    padding: 56px 12px 14px;      /* extra top room for badge/drag + delete */
  }

  /* Collapse the desktop grid */
  .field-row{
    display: block;
  }

  /* Pin order badge + drag handle to top-left, tight stack */
  .field-row .order-cell{
    position: absolute;
    top: 10px; left: 12px;
    display: flex;
    flex-direction: column;       /* order on top, handle below */
    align-items: center;
    gap: 4px;
  }

  /* Pin delete to top-right */
  .field-row .delete-cell{
    position: absolute;
    top: 8px; right: 12px;
  }

  /* Big, tappable controls */
  .order-badge{ width: 28px; height: 28px; font-size: .85rem; }
  .drag-handle{ width: 32px; height: 32px; }

  /* Form is full-width, stacked nicely */
  .field-grid{
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    align-items: start;
  }

  .field-grid label{
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .field-grid label > span{
    margin-bottom: 4px;
  }

  .field-grid input[type="text"],
  .field-grid input[type="number"],
  .field-grid select{
    width: 100%;
    height: 40px;                /* bigger touch target */
  }

  /* Save button aligned right under the fields */
  .field-grid .actions{
    justify-self: end;
  }

  /* Keep the icon buttons consistent on mobile */
  .icon-btn{
    width: 36px;
    height: 36px;
    border-radius: 8px;
    padding: 0;
  }
}

/* Super-small phones: add a bit more top padding */
@media (max-width: 380px){
  .field-card .card-pad{ padding-top: 60px; }
  .order-badge{ width: 26px; height: 26px; }
  .drag-handle{ width: 30px; height: 30px; }
}

/* ---------- Type detail page: mobile layout for field rows ---------- */
@media (max-width: 700px){

  /* Each field card becomes a neat single-column panel */
  .field-card .card-pad{
    position: relative;
    padding: 56px 12px 14px;           /* room for badge/drag (L) + delete (R) */
  }

  /* Collapse the desktop grid → simple block */
  .field-row{
    display: block;
  }

  /* Pin order badge + drag handle top-left, tight stack */
  .field-row .order-cell{
    position: absolute;
    top: 10px; left: 12px;
    display: flex;
    flex-direction: column;            /* badge above, handle below */
    align-items: center;
    gap: 4px;
  }

  /* Pin delete top-right */
  .field-row .delete-cell{
    position: absolute;
    top: 8px; right: 12px;
  }

  /* Big, tappable controls */
  .order-badge{ width: 28px; height: 28px; font-size: .85rem; }
  .drag-handle{ width: 32px; height: 32px; }

  /* Form is full-width, stacked nicely */
  .field-grid{
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    align-items: start;
  }

  .field-grid label{
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .field-grid label > span{
    margin-bottom: 4px;
  }

  .field-grid input[type="text"],
  .field-grid input[type="number"],
  .field-grid select{
    width: 100%;
    height: 42px;                      /* bigger touch target */
  }

  /* Save button aligned right under fields */
  .field-grid .actions{
    justify-self: end;
  }

  /* Make the cards list breathe on mobile */
  .cards.fields-list{
    gap: 12px;                          /* consistent spacing between cards */
  }

  /* Keep icon buttons consistent on mobile */
  .icon-btn{
    width: 36px;
    height: 36px;
    border-radius: 8px;
    padding: 0;
  }
}

/* Super-small phones: tiny bump in top padding for pins */
@media (max-width: 380px){
  .field-card .card-pad{ padding-top: 60px; }
  .order-badge{ width: 26px; height: 26px; }
  .drag-handle{ width: 30px; height: 30px; }
}

/* Nice-to-have: visual feedback while dragging (desktop & large phones with mouse) */
.field-card.dragging{
  opacity: .85;
  transform: scale(.997);
  outline: 2px dashed rgba(37,99,235,.35);
  outline-offset: 2px;
}

/* ---------- Type detail: mobile polish for Fields list ---------- */
@media (max-width: 720px){

  /* Back rail + header card */
  .header-row-outside{
    display:flex;
    gap:10px;
    align-items:stretch;
  }
  .header-row-outside .back-rail{
    flex:0 0 42px;
    width:42px;height:42px;
    display:grid;place-items:center;
    border-radius:10px;
    background: rgba(37,99,235,.12);
  }
  .header-row-outside .card{ flex:1; }

  /* Fields list spacing */
  .cards.fields-list{ gap:12px; }

  /* Each field card becomes a clean single-column panel */
  .field-card .card-pad{
    position:relative;
    padding:58px 12px 14px;    /* space for order+drag (L) and delete (R) */
  }
  .field-row{ display:block; }

  /* Pin order badge + drag to top-left */
  .field-row .order-cell{
    position:absolute; top:10px; left:12px;
    display:flex; flex-direction:column; align-items:center; gap:6px;
  }
  .order-badge{ width:30px; height:30px; font-size:.9rem; }
  .drag-handle{ width:30px; height:30px; }

  /* Pin delete to top-right */
  .field-row .delete-cell{
    position:absolute; top:8px; right:12px;
  }

  /* Full-width form controls, comfy touch targets */
  .field-grid{
    display:grid;
    grid-template-columns:1fr;
    gap:10px;
    align-items:start;
  }
  .field-grid label{ display:flex; flex-direction:column; gap:6px; }
  .field-grid label > span{ margin-bottom:4px; }
  .field-grid input[type="text"],
  .field-grid input[type="number"],
  .field-grid select{
    width:100%; height:42px;
  }
  .field-grid .actions{ justify-self:end; }

  /* Buttons: consistent size on mobile */
  .icon-btn{ width:36px; height:36px; border-radius:8px; padding:0; }

  /* Long option strings wrap gracefully */
  .opt-wrap input{ white-space:normal; overflow-wrap:anywhere; }
}

/* Nice drag feedback (desktop + large phones with mouse) */
.field-card.dragging{
  opacity:.9; transform:scale(.997);
  outline:2px dashed rgba(37,99,235,.35); outline-offset:2px;
}

/* Mobile-friendly drag */
.drag-handle { touch-action: none; cursor: grab; }
.field-card.dragging {
  opacity: .95;
  box-shadow: 0 6px 18px rgba(0,0,0,.15);
}
.field-card.placeholder {
  height: 56px; /* replaced at runtime with exact height */
  border: 2px dashed rgba(37,99,235,.45);
  border-radius: 12px;
  background: transparent;
}
/* ---------- Type detail page: mobile layout for field rows ---------- */
@media (max-width: 700px){

  /* Each field card becomes a neat single-column panel */
  .field-card .card-pad{
    position: relative;
    padding: 56px 12px 14px;   /* room for badge/drag (L) + delete (R) */
  }

  /* Collapse desktop grid */
  .field-row{ display:block; }

  /* Pin order badge + drag handle to top-left */
  .field-row .order-cell{
    position:absolute; top:10px; left:12px;
    display:flex; flex-direction:column; align-items:center; gap:4px;
  }

  /* Pin delete to top-right */
  .field-row .delete-cell{
    position:absolute; top:8px; right:12px;
  }

  /* Full-width stacked form */
  .field-grid{
    display:grid; grid-template-columns:1fr;
    gap:10px; align-items:start;
  }

  .field-grid label{ display:flex; flex-direction:column; gap:6px; }
  .field-grid label > span{ margin-bottom:4px; }

  .field-grid input[type="text"],
  .field-grid input[type="number"],
  .field-grid select{ width:100%; height:42px; }

  .field-grid .actions{ justify-self:end; }

  .cards.fields-list{ gap:12px; }
}

/* Super-small phones */
@media (max-width: 380px){
  .field-card .card-pad{ padding-top:60px; }
}

/* ---------- Touch drag & drop helpers ---------- */
.drag-handle { touch-action: none; }  /* prevent scroll while dragging */

.field-card.dragging,
.field-card.touch-dragging{
  opacity:.9;
  transform:scale(.997);
  outline:2px dashed rgba(37,99,235,.35);
  outline-offset:2px;
}

.field-card.placeholder{
  background: transparent;
  border:2px dashed rgba(37,99,235,.35);
  min-height:56px;
}

/* Keep the left "order+handle" column snug on desktop too */
.field-row{
  display:grid;
  grid-template-columns: max-content 1fr auto;
  column-gap:6px;
  align-items:start;
}
.order-cell{ display:flex; flex-direction:column; align-items:center; gap:3px; }
.order-badge{ width:30px; height:30px; display:inline-grid; place-items:center;
  border-radius:999px; background:rgba(37,99,235,.12); color:#2563eb; font-weight:600; }
.drag-handle{ width:30px; height:30px; cursor:grab; }

.field-card .card-pad{ padding-left:8px; padding-right:12px; } /* give inputs more room */

/* ==== Bigger order badge + drag handle (desktop) ==== */
.field-row{
  grid-template-columns: 56px 1fr auto;   /* wider left rail for bigger controls */
  column-gap: 10px;
  align-items: start;
}

.order-cell{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 6px;                                /* comfy gap between number & handle */
}

/* Order number: big round pill, same visual weight as buttons */
.order-badge{
  width: 40px;
  height: 40px;
  display: inline-grid;
  place-items: center;
  border-radius: 999px;
  background: rgba(37,99,235,.12);
  color: #2563eb;
  font-weight: 700;
  font-size: 1rem;                         /* larger text */
  font-variant-numeric: tabular-nums;
}

/* Drag handle: big, matching button size */
.drag-handle{
  width: 44px;
  height: 44px;
  cursor: grab;
  font-size: 18px;                         /* larger ⠿ glyph */
  line-height: 1;
}

/* Give inputs a touch more room even with bigger controls */
.field-card .card-pad{ padding-left: 10px; padding-right: 12px; }

/* Placeholder height matches the larger controls when touch-dragging */
.field-card.placeholder{ min-height: 76px; }

/* ==== Mobile: keep it big & tappable, adjust paddings for pinned controls ==== */
@media (max-width: 700px){
  .field-card .card-pad{
    position: relative;
    padding: 72px 12px 16px;               /* more top room for 40–44px controls */
  }
  .field-row{ display: block; }            /* stacked editor */
  .field-row .order-cell{
    position: absolute; top: 12px; left: 12px;
    gap: 6px;
  }
  .field-row .delete-cell{
    position: absolute; top: 10px; right: 12px;
  }

  .order-badge{ width: 40px; height: 40px; font-size: 1rem; }
  .drag-handle{ width: 44px; height: 44px; font-size: 18px; }

  .field-grid{
    grid-template-columns: 1fr;
    gap: 12px;
  }
  .cards.fields-list{ gap: 12px; }
}

/* Super-small phones: tiny extra headroom */
@media (max-width: 380px){
  .field-card .card-pad{ padding-top: 78px; }
}
/* Autoscroll visual helpers */
.field-card.dragging,
.field-card.touch-dragging{
  opacity:.9;
  transform:scale(.997);
  outline:2px dashed rgba(37,99,235,.35);
  outline-offset:2px;
}
.field-card.placeholder{
  background:transparent;
  border:2px dashed rgba(37,99,235,.35);
  min-height:56px;
}
.drag-handle{ touch-action: none; } /* avoids page scrolling while dragging */
/* === Types > Fields: sane, full-width rows that don't overflow === */

/* Make the fields list a single full-width column (not centered, not squished) */
.cards.fields-list{
  display: grid;
  grid-template-columns: 1fr;        /* one column, full width */
  justify-content: stretch !important;
  justify-items: stretch !important;
  align-items: stretch !important;
  width: 100%;
}

/* Each field card stretches across the column */
.cards.fields-list > li.card{
  width: 100%;
  max-width: 100%;
}

/* Row = [ form (with order/drag inside) | delete ] */
.field-row{
  display: grid;
  grid-template-columns: 1fr auto;   /* editor grows; delete stays tight */
  gap: 12px;
  align-items: start;
}

/* Editor grid (inside <form class="field-grid">) */
.field-grid{
  display: grid;
  /*  Order+Drag | Label | Kind | Options | Required | Save  */
  grid-template-columns:
    max-content
    minmax(220px, 1.4fr)
    150px
    minmax(240px, 1.8fr)
    120px
    auto;
  gap: 10px 12px;
  align-items: end;
}

/* Put each piece in its column */
.field-grid .order-cell   { grid-column: 1; }
.field-grid .label        { grid-column: 2; }
.field-grid .kind         { grid-column: 3; }
.field-grid .options      { grid-column: 4; }
.field-grid .required     { grid-column: 5; }
.field-grid .actions      { grid-column: 6; justify-self: end; }

/* Inputs/labels can shrink; no overflow */
.field-grid label{ display:flex; flex-direction:column; gap:6px; min-width:0; }
.field-grid input[type="text"],
.field-grid input[type="number"],
.field-grid select{ width:100%; min-width:0; }

/* Order badge + drag handle (tidy sizes) */
.order-cell{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.order-badge{
  display:inline-grid; place-items:center;
  width: 32px; height: 32px;
  border-radius:999px;
  background: rgba(37,99,235,.12);
  color:#2563eb; font-weight:700; font-variant-numeric:tabular-nums;
}
.drag-handle{
  width:32px; height:32px; cursor:grab; line-height:1;
}

/* Hide Options unless kind=select (JS toggles .opt-wrap display) */
.opt-wrap{ display:none; }

/* Delete button column aligns with bottom of form on desktop */
.delete-cell{ align-self:end; }

/* --- Responsive collapses --- */
@media (max-width: 1100px){
  .field-grid{
    grid-template-columns:
      max-content 1fr 150px 1fr auto;  /* drop explicit 'Required' width */
  }
  .field-grid .required{ grid-column:auto; }
}

@media (max-width: 980px){
  .field-row{ grid-template-columns: 1fr auto; }
  .field-grid{
    grid-template-columns: 1fr 1fr;    /* two rows */
    gap: 10px;
  }
  .field-grid .order-cell{ grid-column: 1; }
  .field-grid .label     { grid-column: 1 / -1; } /* label full width */
  .field-grid .kind      { grid-column: 1; }
  .field-grid .options   { grid-column: 2; }
  .field-grid .required  { grid-column: 1; }
  .field-grid .actions   { grid-column: 2; justify-self:end; }
}

@media (max-width: 640px){
  .field-grid{
    grid-template-columns: 1fr;        /* stack nicely on phones */
  }
  .field-grid .label,
  .field-grid .kind,
  .field-grid .options,
  .field-grid .required,
  .field-grid .actions{ grid-column: 1; }
  .delete-cell{ justify-self: end; }
}

/* Ensure card padding gives controls breathing room */
.field-card .card-pad{ padding: 16px; }
/* ===== Mobile: inline actions next to Label (≤640px) ===== */
@media (max-width: 640px){

  /* Field card layout reset */
  .cards.fields-list .field-card .card-pad{
    padding: 14px !important;
  }
  .cards.fields-list .field-row{
    display: block !important;   /* inner form handles the grid */
  }

  /* Editor grid: [order/drag] [label] [actions] all on one row */
  .cards.fields-list .field-grid{
    display: grid !important;
    grid-template-columns: 44px 1fr auto !important;
    grid-auto-rows: auto;
    gap: 10px !important;
    align-items: end !important;
  }

  /* Cells on row 1 */
  .cards.fields-list .field-grid .order-cell{ grid-column:1; grid-row:1; align-self:center; }
  .cards.fields-list .field-grid .label     { grid-column:2; grid-row:1; }
  .cards.fields-list .field-grid .actions   {
    grid-column:3; grid-row:1;
    align-self:center; justify-self:end;
    display:flex; gap:8px;
  }

  /* Hide advanced fields by default */
  .cards.fields-list .field-grid .kind,
  .cards.fields-list .field-grid .options,
  .cards.fields-list .field-grid .required{ display:none !important; }

  /* When More is opened, show advanced fields stacked below, full width */
  .cards.fields-list .field-grid.show-extras .kind,
  .cards.fields-list .field-grid.show-extras .options,
  .cards.fields-list .field-grid.show-extras .required{
    display:flex !important;
    flex-direction: column;
    gap: 6px;
    grid-column: 1 / -1;   /* span all three columns */
  }

  /* Tappable sizes */
  .cards.fields-list .order-badge{ width:34px; height:34px; }
  .cards.fields-list .drag-handle{ width:34px; height:34px; cursor:grab; }

  /* Inputs */
  .cards.fields-list .field-grid input[type="text"],
  .cards.fields-list .field-grid input[type="number"],
  .cards.fields-list .field-grid select{
    height: 40px;
    width: 100%;
    min-width: 0;
  }

  /* Action buttons (More/Save/Delete) */
  .cards.fields-list .field-grid .actions .icon-btn{
    width: 36px; height: 36px; padding: 0;
  }
  .icon-btn.more{
    border: 1px solid var(--line, rgba(255,255,255,.14));
    border-radius: 8px;
    background: linear-gradient(180deg, rgba(78,161,255,.16), rgba(78,161,255,.06));
    color: var(--accent, #4ea1ff);
  }
  .icon-btn.more[aria-expanded="true"]{
    box-shadow: 0 0 0 3px rgba(78,161,255,.22);
    filter: brightness(1.05);
  }

  /* Delete form sits inline inside .actions on mobile — remove default margins */
  .cards.fields-list .field-grid .actions form{ margin: 0; }
}
/* ---- Mobile fix: keep More · Save · Delete inline, no overlap ---- */
@media (max-width: 640px){
  /* Actions row = flex */
  .cards.fields-list .field-grid .actions{
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    justify-self: end;
    flex-wrap: nowrap;           /* don't wrap over label */
  }

  /* When delete form is inside actions, cancel the absolute pin */
  .cards.fields-list .field-grid .actions .delete-cell{
    position: static !important;
    top: auto !important;
    right: auto !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Consistent button sizes in the actions row */
  .cards.fields-list .field-grid .actions .icon-btn,
  .cards.fields-list .field-grid .actions .delete-cell .icon-btn{
    width: 36px !important;
    height: 36px !important;
    padding: 0 !important;
  }
}

/* Optional: on very narrow phones, shrink icons a touch so all 3 fit neatly */
@media (max-width: 360px){
  .cards.fields-list .field-grid .actions .icon-btn{
    width: 32px !important;
    height: 32px !important;
  }
}
/* --- Mobile: put More · Save · Delete at the TOP, not centered --- */
@media (max-width: 640px){
  /* Make the row two columns: Label | Actions */
  .cards.fields-list .field-grid{
    grid-template-columns: 1fr auto !important;
    align-items: start !important;        /* all cells align to top */
  }

  .cards.fields-list .field-grid .label{ grid-column: 1; }

  .cards.fields-list .field-grid .actions{
    grid-column: 2;
    justify-self: end;
    align-self: start !important;         /* stick to top edge */
    display: flex !important;
    align-items: flex-start !important;
    gap: 8px !important;
    flex-wrap: nowrap;
  }

  /* If delete button was absolutely positioned before, neutralize it */
  .cards.fields-list .field-grid .actions .delete-cell{
    position: static !important;
    top: auto !important;
    right: auto !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Keep icon sizes consistent */
  .cards.fields-list .field-grid .actions .icon-btn{
    width: 36px; height: 36px; padding: 0;
  }

  /* In case label input added extra top margin */
  .cards.fields-list .field-grid .label input{
    margin-top: 0 !important;
  }
}
/* === Mobile: no overlap — rail lives inside the grid === */
@media (max-width: 640px){
  /* Compact 3-column grid: [rail] [Label] [Actions] */
  .cards.fields-list .field-grid{
    display: grid !important;
    grid-template-columns: 48px 1fr auto !important;  /* rail | label | buttons */
    gap: 8px 10px !important;
    align-items: start !important;
    margin-left: 0 !important;   /* undo any previous left margin hacks */
  }

  /* Put pieces in the right columns */
  .cards.fields-list .field-grid .order-cell{ 
    grid-column: 1 !important; 
    display: flex; flex-direction: column; align-items: center; gap: 6px;
  }
  .cards.fields-list .field-grid .label{ grid-column: 2 !important; }
  .cards.fields-list .field-grid .actions{
    grid-column: 3 !important;
    justify-self: end; align-self: start !important;
    display: flex; gap: 8px;
  }

  /* Hide the advanced fields on phones (toggled via “More”) */
  .cards.fields-list .field-grid .kind,
  .cards.fields-list .field-grid .options,
  .cards.fields-list .field-grid .required{
    display: none !important;
  }

  /* No need for big top padding anymore */
  .cards.fields-list .field-card .card-pad{
    padding-top: 16px !important;
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  /* Comfortable, consistent rail sizes */
  .cards.fields-list .order-badge{ width: 40px; height: 40px; font-size: 1rem; }
  .cards.fields-list .drag-handle{ width: 40px; height: 40px; cursor: grab; }
}
/* === Mobile: put "More" under Delete, right-aligned === */
@media (max-width: 640px){
  /* Turn the action area into a 2x2 grid */
  .cards.fields-list .field-grid .actions{
    display: grid !important;
    grid-template-columns: auto auto;   /* [Save] [Delete] */
    grid-auto-rows: auto;
    gap: 8px !important;
    align-self: start !important;
    justify-self: end !important;
  }
  /* Force positions by type (works with your icon-btn classes) */
  .cards.fields-list .field-grid .actions .primary{ /* Save */
    grid-column: 1; grid-row: 1;
  }
  .cards.fields-list .field-grid .actions .danger{  /* Delete */
    grid-column: 2; grid-row: 1;
  }
  .cards.fields-list .field-grid .actions .more-btn{ /* More under Delete */
    grid-column: 2; grid-row: 2;
    justify-self: end;
    margin-top: 4px;
  }
}
/* === Mobile: align Label/input with action buttons on the top row === */
@media (max-width: 640px){
  /* Field editor becomes a 2-column grid: [Label area] | [Actions] */
  .cards.fields-list .field-grid{
    display: grid !important;
    grid-template-columns: 1fr auto !important;  /* left grows, right snug */
    gap: 8px 10px !important;
    align-items: start !important;
  }

  /* Put the Label (with its input) in the left, top cell */
  .cards.fields-list .field-grid .label{
    grid-column: 1; 
    grid-row: 1;
    margin: 0 !important;
  }
  .cards.fields-list .field-grid .label input{
    height: 40px;            /* matches button height */
  }

  /* Actions (Save/Delete/More) in the right, top cell */
  .cards.fields-list .field-grid .actions{
    grid-column: 2;
    grid-row: 1;
    align-self: start !important;
    justify-self: end !important;

    /* keep the 2x2 layout from earlier: Save | Delete (top), More below Delete */
    display: grid !important;
    grid-template-columns: auto auto;
    grid-auto-rows: auto;
    gap: 8px !important;
  }
  .cards.fields-list .field-grid .actions .primary{ grid-column:1; grid-row:1; } /* Save */
  .cards.fields-list .field-grid .actions .danger { grid-column:2; grid-row:1; } /* Delete */
  .cards.fields-list .field-grid .actions .more-btn{
    grid-column:2; grid-row:2; justify-self:end;  /* More under Delete */
  }

  /* Make icon buttons same visual height as the text input */
  .cards.fields-list .icon-btn{
    width: 40px; height: 40px;
  }

  /* Ensure there’s enough top room for the pinned order/drag block if you use it */
  .cards.fields-list .field-card .card-pad{
    padding-top: 72px;  /* keep or tweak if your order/drag is taller/shorter */
  }
}
/* Item row: content on the left, actions on the right */
.list .item-row{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;                 /* small gap so pills sit close to actions */
  align-items: start;
}

/* Left side content */
.list .item-row .item-main{
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Extras as pills, nudged toward the actions (right edge of left column) */
.list .item-row .extras-inline{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: flex-end; /* pushes pills near the actions stack */
}

/* Right side actions: delete (top), edit (below), move (optional) */
.list .item-row .item-actions{
  display: flex;
  flex-direction: column;
  gap: 6px;
  align-items: flex-end;
}

/* Keep icon sizes consistent with header icons */
.list .item-row .icon-btn{
  width: 32px;
  height: 32px;
  padding: 0;
  border-radius: 8px;
}

/* Mobile: keep stack tight and readable */
@media (max-width: 640px){
  .list .item-row{
    gap: 8px;
  }
  .list .item-row .extras-inline{
    justify-content: flex-end;
  }
}
/* Right-side action stack */
.list .item-row .item-actions{
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:flex-end;
}

/* Move (left) + Delete (right) on the same row */
.list .item-row .actions-top{
  display:flex;
  gap:6px;
  align-items:center;
  justify-content:flex-end; /* keeps both aligned to the right edge */
}

/* Keep icon sizes consistent */
.list .item-row .icon-btn{
  width:32px;
  height:32px;
  padding:0;
  border-radius:8px;
}

@media (max-width:640px){
  .list .item-row .actions-top{ gap:8px; }
}
/* Wrapper spacing */
.extras-wrap{ margin-top:.35rem; }

/* Make the pills a touch bigger ONLY in this area */
.extras-inline .pill{
  font-size: 13px;         /* was ~12 — slightly larger */
  padding: 3px 10px;       /* a bit roomier */
}

/* 2×2 grid preview (keeps pill look; no stretching) */
.extras-inline{
  display: grid;
  grid-template-columns: repeat(2, auto);
  gap: 6px;
  justify-content: start;
  align-content: start;
}

/* Hide everything after the 4th until expanded */
.extras-inline.collapsible:not(.expanded) .pill:nth-child(n+5){
  display: none;
}

/* Show-more button (subtle, on-brand) */
.extras-more-btn{
  display: inline-block;
  margin-top: 6px;
  margin-left: auto;      /* right align under the grid */
  background: transparent;
  border: 0;
  color: var(--accent);
  font-size: .95rem;
  cursor: pointer;
}
.extras-more-btn:hover{ text-decoration: underline; }

/* Super narrow phones: stack to 1 column to avoid squish */
@media (max-width: 420px){
  .extras-inline{ grid-template-columns: 1fr; }
}
/* Make only item rows use a 2x2 grid */
.list > li.item-row{
  display: grid;
  grid-template-columns: auto 1fr;     /* left: actions column, right: content */
  grid-template-areas:
    "actions head"
    "actions pills";
  column-gap: 10px;
  align-items: start;
}

/* Right side: title/note on row 1, pills on row 2 */
.item-row .item-main{
  display: contents;                   /* lets its children occupy named areas */
}
.item-row .item-main .title{ grid-area: head; }
.item-row .badges.extras-inline{
  grid-area: pills;
  display: grid;
  grid-template-columns: repeat(2, max-content); /* 2x2, keep pill look */
  gap: 6px 8px;
  justify-content: start;              /* left align block */
  justify-items: start;                /* left align each pill */
}

/* Left side: buttons pinned to top-left, two rows:
   row1 = move + delete, row2 = edit */
.item-row .item-actions{
  grid-area: actions;
  display: grid;
  grid-auto-rows: min-content;
  gap: 8px;
  align-content: start;
  justify-items: start;                /* top-left */
}
.item-row .item-actions .actions-top{
  display: flex;
  gap: 8px;                            /* move + delete on the same row */
}
.item-row .item-actions .edit-btn{
  justify-self: start;                 /* edit below, left aligned */
}

/* (Optional) keep things comfy on very narrow phones */
@media (max-width: 420px){
  .list > li.item-row{
    column-gap: 8px;
  }
  .item-row .badges.extras-inline{
    gap: 6px 6px;
  }
}
/* Put actions on the RIGHT column; pills row stays on left */
.list > li.item-row{
  grid-template-columns: 1fr auto;          /* content | actions */
  grid-template-areas:
    "head  actions"
    "pills actions";
}

/* Right column: align buttons to the right, stack: (move+delete) then edit */
.item-row .item-actions{
  grid-area: actions;
  display: grid;
  grid-auto-rows: min-content;
  gap: 8px;
  align-content: start;
  justify-items: end;                        /* right align the column */
}
.item-row .item-actions .actions-top{
  display: flex;
  gap: 8px;
  justify-content: flex-end;                 /* move + delete on top-right */
}
.item-row .item-actions .edit-btn{
  justify-self: end;                         /* edit below, right aligned */
}

/* Keep pills on second row, left */
.item-row .badges.extras-inline{
  grid-area: pills;
  display: grid;
  grid-template-columns: repeat(2, max-content);
  gap: 6px 8px;
  justify-content: start;
  justify-items: start;
}
/* Item row layout: content left, actions top-right */
.list li.item-row{
  display: flex !important;
  align-items: flex-start !important;  /* top align */
  gap: 12px;
}
.item-row .item-main{
  flex: 1 1 auto;
  min-width: 0;                        /* prevent overflow */
}
.item-row .item-actions{
  margin-left: auto !important;         /* push to right edge */
  align-self: flex-start !important;    /* stick to top */
  display: flex;
  flex-direction: column;
  align-items: flex-end;                /* right-align inside */
  gap: 8px;
}
.item-row .item-actions .actions-top{
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}
/* Put "Show more" inside the pills area, top-right */
.item-row .extras-wrap{
  position: relative;            /* create positioning context */
}

.item-row .extras-inline{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding-right: 112px;          /* space so pills don't go under the button */
  min-height: 32px;              /* matches pill/button height so layout is stable */
}

/* The button sits on the top-right corner of the pills area */
.item-row .extras-more-btn{
  position: absolute;
  top: 0;
  right: 0;
  margin: 0;
  white-space: nowrap;
  height: 32px;                  /* roughly pill height; adjust if yours differs */
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;
}
/* Mobile: keep "Show more" inside the card and stop overflow */
@media (max-width: 640px){
  .item-row .extras-wrap{
    position: relative;
    overflow: hidden;                  /* never let children extend the card */
  }

  .item-row .extras-inline{
    /* leave room for the button without forcing overflow */
    padding-right: clamp(72px, 36vw, 112px);
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    min-height: 32px;                  /* same as button height for stable layout */
    word-break: break-word;
    overflow-wrap: anywhere;
  }

  .item-row .extras-more-btn{
    position: absolute;
    top: 0;
    right: 8px;                        /* respect card padding on mobile */
    height: 32px;
    padding: 6px 10px;
    /* make sure long text never widens the card */
    max-width: 45%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
/* Wrap must be positioned so the button can anchor inside it */
.item-row .extras-wrap{
  position: relative;
}

/* Let pills wrap nicely and leave room for the button on the right */
.item-row .extras-inline{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding-right: 96px;               /* space so the button doesn't overlap */
}

/* The button itself: like icon-btn but can fit "+X" text */
.icon-btn.count-btn{
  position: absolute;
  top: 0;
  right: 0;
  height: 32px;
  min-width: 44px;
  padding: 0 10px;
  border-radius: 999px;              /* pill-y */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-variant-numeric: tabular-nums;
}

/* Mobile: keep everything inside the card, avoid sideways scroll */
@media (max-width: 640px){
  .item-row .extras-inline{
    padding-right: clamp(72px, 32vw, 104px);
    word-break: break-word;
    overflow-wrap: anywhere;
  }
  .icon-btn.count-btn{
    right: 8px;                      /* respect card padding on small screens */
  }
}
/* Pills flow + inline “+N” button */
.item-row .extras-inline{
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  padding-right: 0;           /* no fake space needed now */
  max-width: 100%;
}

.item-row .extras-inline .pill{
  flex: 0 1 auto;
  min-width: 0;
}

.icon-btn.count-btn{
  position: static !important; /* kill any absolute rules */
  flex: 0 0 auto;
  margin-left: auto;           /* push to right of the current row */
  height: 32px;
  min-width: 44px;
  padding: 0 10px;
  border-radius: 999px;
  font-variant-numeric: tabular-nums;
}

/* Mobile: keep everything within the card, allow wrapping */
@media (max-width: 640px){
  .item-row .extras-inline{
    gap: 6px;
    overflow-wrap: anywhere;   /* long values won’t force overflow */
  }
  .icon-btn.count-btn{
    margin-left: auto;         /* stays at the right edge of its line */
  }
}
/* Row: pills on the left, +N button on the right (same row) */
.item-row .extras-wrap{
  display:flex;
  align-items:flex-start;   /* top-align with title */
  gap:8px;
  max-width:100%;
}

/* Pills container wraps within the left column */
.item-row .extras-inline{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  flex:1 1 auto;            /* take remaining space */
  min-width:0;              /* allow shrinking to avoid overflow */
  overflow-wrap:anywhere;   /* long values won't push layout */
}

/* Keep the button at the far right, on the first row */
.icon-btn.count-btn{
  position:static !important; /* kill any old absolute rules */
  flex:0 0 auto;
  align-self:flex-start;      /* top-right, not vertically centered */
  height:34px;
  padding:0 10px;
  border-radius:999px;
  font-variant-numeric: tabular-nums;
  white-space:nowrap;
}

/* Collapse to 4 pills when not expanded */
.item-row .extras-inline.collapsible .pill:nth-child(n+5){ display:none; }
.item-row .extras-inline.expanded .pill{ display:inline-flex; }

/* Mobile safety */
@media (max-width: 640px){
  .item-row .extras-wrap{ gap:8px; }
  .item-row .extras-inline{ gap:6px; }
  .icon-btn.count-btn{ height:34px; }
}
/* Hide pills 5+ by default */
.item-row .extras-inline.collapsible .pill:nth-child(n+5){ display:none; }

/* When expanded, explicitly re-show pills 5+ with equal specificity */
.item-row .extras-inline.collapsible.expanded .pill:nth-child(n+5){
  display:inline-flex;
}
/* First real content after the (hidden) confirm modal */
.container main > #confirmModal + * { margin-top: 14px; }      /* phones */
@media (min-width: 640px){
  .container main > #confirmModal + * { margin-top: 18px; }    /* tablets */
}
@media (min-width: 1024px){
  .container main > #confirmModal + * { margin-top: 24px; }    /* desktop */
}
/* Make the header logo container transparent */
.header-inner .brand .logo{
  background: transparent;   /* or: background: none; */
  box-shadow: none;
}

/* Ensure the image itself has no background */
.header-inner .brand .logo picture,
.header-inner .brand .logo img{
  background: transparent;
}

/* Optional: keep the hover lift without any glow */
.header-inner .brand .logo:hover{
  transform: translateY(-1px);
  filter: none;
}
